% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/HMMDataPrep.R
\name{HMMDataPrep}
\alias{HMMDataPrep}
\title{Prepare DAM Activity Data for Analysis}
\usage{
HMMDataPrep(
  metafile_path,
  result_dir = getwd(),
  ldcyc = 12,
  day_range = c(1, 2),
  ...
)
}
\arguments{
\item{metafile_path}{Character string. The full path to the metadata CSV file.
This file should contain columns linking unique identifiers (like \code{id}) to
monitor files and experimental conditions (e.g., \code{genotype}, \code{replicate}).}

\item{result_dir}{Character string. The directory path where the raw DAM monitor
files (referenced in the metadata) are located. Defaults to the current
working directory (\code{getwd()}).}

\item{ldcyc}{Numeric. The duration of the light phase in hours
within a 24-hour cycle (e.g., 12 for a standard LD 12:12 cycle). Used for
calculating the 'phase' column. Defaults to 12.}

\item{day_range}{Numeric vector of length 2. Specifies the start and end day
(inclusive) to retain for analysis, e.g., \code{c(1, 3)} for days 1, 2, and 3.
To select only a single day, repeat the number, e.g., \code{c(2, 2)}.
Defaults to \code{c(1, 2)}.}
}
\value{
A \code{behavr} table (\code{data.table} format) containing the processed
activity data. Includes original metadata columns plus added columns:
\code{moving} (logical, activity > 0), \code{day} (integer), \code{phase} (factor: "Light", "Dark"),
\code{normact} (numeric, normalized activity within ID/day), and \code{t} (numeric, time in seconds).
}
\description{
This function processes Drosophila Activity Monitor (DAM) data and associated
metadata. It loads, links, cleans, filters, calculates features (day, phase,
normalized activity), and prepares the data into a \code{behavr} table suitable
for downstream analysis (e.g., HMM fitting, plotting).
}
\examples{
\dontrun{
# Define paths and parameters
metadata_file <- "path/to/your/metadata.csv"
dam_data_folder <- "path/to/your/dam_files/"

# Prepare data for days 2 through 4
prepared_data <- HMMDataPrep(
  metafile_path = metadata_file,
  result_dir = dam_data_folder,
  ldcyc = 12,
  day_range = c(2, 4)
)

# Check the resulting table
print(prepared_data)
summary(prepared_data)
}

# Now, when you call HMMDataPrep, you can add arguments for sleepDAMAnnotation
# This call will use a 10-minute threshold instead of the default 5 minutes
annotated_data <- HMMDataPrep(metadata_file_path, min_time_immobile = c(behavr::mins(5), behavr::mins(1440)))

# If you don't provide the argument, the default from sleepDAMAnnotation is used
annotated_data_default <- HMMDataPrep(metadata_file_path)

}
