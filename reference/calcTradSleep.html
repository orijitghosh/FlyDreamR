<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate Comprehensive Sleep Metrics from Activity Data — calcTradSleep • FlyDreamR</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate Comprehensive Sleep Metrics from Activity Data — calcTradSleep"><meta name="description" content='Processes activity data to calculate traditional sleep metrics including sleep
duration, activity index during wakefulness, brief awakenings, and detailed
sleep bout characteristics. This function implements standard sleep analysis
metrics commonly used in Drosophila sleep research.
A "brief awakening" is defined as a single time point of movement that is
immediately preceded and followed by immobility, potentially indicating
fragmented or shallow sleep.'><meta property="og:description" content='Processes activity data to calculate traditional sleep metrics including sleep
duration, activity index during wakefulness, brief awakenings, and detailed
sleep bout characteristics. This function implements standard sleep analysis
metrics commonly used in Drosophila sleep research.
A "brief awakening" is defined as a single time point of movement that is
immediately preceded and followed by immobility, potentially indicating
fragmented or shallow sleep.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">FlyDreamR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/introduction.html">Get Started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/introduction.html">Analyzing Sleep States with FlyDreamR</a></li>
    <li><a class="dropdown-item" href="../articles/data-prep.html">Getting data into FlyDreamR</a></li>
    <li><a class="dropdown-item" href="../articles/traditional-sleep.html">Traditional sleep analyses</a></li>
    <li><a class="dropdown-item" href="../articles/hmm-workflow.html">HMM fitting and visualization</a></li>
    <li><a class="dropdown-item" href="../articles/shiny-app.html">Running the FlyDreamR Shiny app</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/orijitghosh/FlyDreamR" aria-label="GitHub"><span class="fa fab fa-github"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Calculate Comprehensive Sleep Metrics from Activity Data</h1>
      <small class="dont-index">Source: <a href="https://github.com/orijitghosh/FlyDreamR/blob/HEAD/R/calcTradSleep.R" class="external-link"><code>R/calcTradSleep.R</code></a></small>
      <div class="d-none name"><code>calcTradSleep.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Processes activity data to calculate traditional sleep metrics including sleep
duration, activity index during wakefulness, brief awakenings, and detailed
sleep bout characteristics. This function implements standard sleep analysis
metrics commonly used in Drosophila sleep research.</p>
<p>A "brief awakening" is defined as a single time point of movement that is
immediately preceded and followed by immobility, potentially indicating
fragmented or shallow sleep.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calcTradSleep</span><span class="op">(</span><span class="va">dt_test</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dt-test">dt_test<a class="anchor" aria-label="anchor" href="#arg-dt-test"></a></dt>
<dd><p>A <code>data.table</code> containing activity and sleep state data,
typically the output from <code><a href="HMMDataPrep.html">HMMDataPrep</a></code>. Must contain the
following columns:</p><ul><li><p><code>id</code>: Unique identifier for each individual</p></li>
<li><p><code>moving</code>: Logical indicator of movement</p></li>
<li><p><code>asleep</code>: Logical indicator of sleep state</p></li>
<li><p><code>activity</code>: Numeric activity count</p></li>
<li><p><code>phase</code>: Factor with levels "Light" and "Dark"</p></li>
<li><p><code>day</code>: Integer day number</p></li>
<li><p><code>genotype</code>: Character or factor indicating genotype</p></li>
<li><p><code>replicate</code>: Character or factor indicating replicate ID</p></li>
</ul></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A named list containing seven <code>data.table</code> objects with sleep
metrics (all time values in <strong>minutes</strong>):</p><dl><dt><code>brief_awakenings_data</code></dt>
<dd><p>Original data with added
<code>brief_awakenings</code> column (logical)</p></dd>

<dt><code>sleep_summary_phase</code></dt>
<dd><p>Total sleep time per phase (Light/Dark)
and day for each individual</p></dd>

<dt><code>sleep_summary_whole_day</code></dt>
<dd><p>Total sleep time per day for each
individual</p></dd>

<dt><code>activity_index_phase</code></dt>
<dd><p>Mean activity during wakefulness per
phase and day (total activity / time awake)</p></dd>

<dt><code>activity_index_whole_day</code></dt>
<dd><p>Mean activity during wakefulness
per day</p></dd>

<dt><code>bout_summary_day</code></dt>
<dd><p>Detailed sleep bout metrics per day including:</p><ul><li><p><code>latency</code>: Time to first sleep bout (minutes from day start)</p></li>
<li><p><code>first_bout_length</code>: Duration of first sleep bout</p></li>
<li><p><code>latency_to_longest_bout</code>: Time to longest bout</p></li>
<li><p><code>length_longest_bout</code>: Duration of longest bout</p></li>
<li><p><code>n_bouts</code>: Number of sleep bouts</p></li>
<li><p><code>mean_bout_length</code>: Average bout duration</p></li>
<li><p><code>total_bout_length</code>: Total sleep time from bouts</p></li>
</ul></dd>

<dt><code>bout_summary_phase</code></dt>
<dd><p>Sleep bout metrics per phase and day</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function calculates metrics separately for light and dark phases based on
the <code>phase</code> column. Sleep bouts are identified using
<code><a href="https://rdrr.io/pkg/sleepr/man/bout_analysis.html" class="external-link">bout_analysis</a></code> from the <code>sleepr</code> package.</p>
<p>Activity index provides a measure of movement intensity during wake periods,
which can indicate arousal threshold or sleep depth.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="HMMDataPrep.html">HMMDataPrep</a></code> for preparing input data
<code><a href="https://rdrr.io/pkg/sleepr/man/bout_analysis.html" class="external-link">bout_analysis</a></code> for bout detection algorithm</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Assume 'processed_data' is output from HMMDataPrep()</span></span></span>
<span class="r-in"><span><span class="va">sleep_metrics</span> <span class="op">&lt;-</span> <span class="fu">calcTradSleep</span><span class="op">(</span><span class="va">processed_data</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Access individual metric tables</span></span></span>
<span class="r-in"><span><span class="va">daily_bouts</span> <span class="op">&lt;-</span> <span class="va">sleep_metrics</span><span class="op">$</span><span class="va">bout_summary_day</span></span></span>
<span class="r-in"><span><span class="va">phase_sleep</span> <span class="op">&lt;-</span> <span class="va">sleep_metrics</span><span class="op">$</span><span class="va">sleep_summary_phase</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># View brief awakening data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sleep_metrics</span><span class="op">$</span><span class="va">brief_awakenings_data</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Summary statistics</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">sleep_metrics</span><span class="op">$</span><span class="va">sleep_summary_whole_day</span><span class="op">$</span><span class="va">time_spent_sleeping</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Arijit Ghosh.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

